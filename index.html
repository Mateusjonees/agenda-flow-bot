<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
    <title>Foguete Gestão Empresarial | Sistema Completo de Gestão</title>
    <meta name="description" content="Sistema completo de gestão empresarial com automação inteligente via WhatsApp">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#E31837" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Foguete" />
    <meta name="mobile-web-app-capable" content="yes" />
    
    <!-- Preconnect to critical domains only -->
    <link rel="preconnect" href="https://pnwelorcrncqltqiyxwx.supabase.co" crossorigin />
    
    <!-- DNS Prefetch for secondary resources (lower priority) -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
    <link rel="dns-prefetch" href="https://img.youtube.com" />
    
    <!-- Preload critical assets with high priority -->
    <link rel="preload" href="/foguetinho.png" as="image" type="image/png" fetchpriority="high" />
    
    <!-- Icons and manifest -->
    <link rel="icon" type="image/png" href="/foguetinho.png">
    <link rel="apple-touch-icon" href="/icon-192.png" />
    <link rel="manifest" href="/manifest.json">
    
    <!-- iOS Splash Screens -->
    <link rel="apple-touch-startup-image" href="/foguetinho.png" />
    
    <!-- Open Graph / Social -->
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://storage.googleapis.com/gpt-engineer-file-uploads/3WF77CQiGnfJw3tdycD5KYgot9b2/social-images/social-1762508861184-logo_foguete_transparente-removebg-preview.png">
    <meta property="og:title" content="Foguete Gestão Empresarial | Sistema Completo de Gestão">
    <meta property="og:description" content="Sistema completo de gestão empresarial com automação inteligente via WhatsApp">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="https://storage.googleapis.com/gpt-engineer-file-uploads/3WF77CQiGnfJw3tdycD5KYgot9b2/social-images/social-1762508861184-logo_foguete_transparente-removebg-preview.png">
    <meta name="twitter:title" content="Foguete Gestão Empresarial | Sistema Completo de Gestão">
    <meta name="twitter:description" content="Sistema completo de gestão empresarial com automação inteligente via WhatsApp">
    
    <!-- Inline critical CSS for faster first paint -->
    <style>
      body { margin: 0; background-color: #0A0A0A; font-family: system-ui, -apple-system, sans-serif; }
      #root { min-height: 100vh; }
      .initial-loader { 
        display: flex; 
        flex-direction: column;
        align-items: center; 
        justify-content: center; 
        min-height: 100vh; 
        background: #0A0A0A; 
      }
      .initial-loader svg { 
        animation: spin 1s linear infinite; 
        color: #E31837; 
        width: 32px; 
        height: 32px; 
      }
      @keyframes spin { 
        from { transform: rotate(0deg); } 
        to { transform: rotate(360deg); } 
      }
      .recovery-msg {
        display: none;
        flex-direction: column;
        align-items: center;
        margin-top: 24px;
        color: #a0a0a0;
        text-align: center;
      }
      .recovery-msg.visible { display: flex; }
      .recovery-btn {
        margin-top: 12px;
        padding: 10px 20px;
        background: #E31837;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
      }
      .recovery-btn:hover { background: #c41430; }
      .auth-skeleton {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 16px;
        background: linear-gradient(135deg, #1a1a1a 0%, #0A0A0A 100%);
      }
      .auth-card-skeleton {
        width: 100%;
        max-width: 400px;
        background: #1a1a1a;
        border: 1px solid #333;
        border-radius: 12px;
        padding: 32px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.5);
      }
      .skeleton-line {
        height: 12px;
        background: linear-gradient(90deg, #2a2a2a 25%, #3a3a3a 50%, #2a2a2a 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
        border-radius: 4px;
        margin-bottom: 16px;
      }
      .skeleton-input {
        height: 48px;
        background: #2a2a2a;
        border-radius: 6px;
        margin-bottom: 16px;
      }
      .skeleton-btn {
        height: 48px;
        background: #E31837;
        border-radius: 6px;
        opacity: 0.5;
      }
      @keyframes shimmer {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }
    </style>
  </head>

  <body>
    <div id="root">
      <!-- Initial loader shown before JS loads -->
      <div class="initial-loader" id="initial-loader">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
        </svg>
        <div class="recovery-msg" id="recovery-msg">
          <p>O site está demorando para carregar.</p>
          <button class="recovery-btn" id="recovery-btn">Limpar cache e recarregar</button>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Fallback recovery script for stuck loaders (cache/SW issues) -->
    <script>
      (function() {
        var TIMEOUT_MS = 8000;
        var timer = setTimeout(function() {
          var msg = document.getElementById('recovery-msg');
          if (msg) msg.classList.add('visible');
        }, TIMEOUT_MS);
        
        // If React mounts, loader is replaced, so we can clear the timer
        var observer = new MutationObserver(function(mutations) {
          var loader = document.getElementById('initial-loader');
          if (!loader || !document.body.contains(loader)) {
            clearTimeout(timer);
            observer.disconnect();
          }
        });
        observer.observe(document.getElementById('root'), { childList: true, subtree: true });
        
        // Recovery button handler
        document.addEventListener('click', function(e) {
          if (e.target && e.target.id === 'recovery-btn') {
            // Unregister service workers
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker.getRegistrations().then(function(regs) {
                regs.forEach(function(r) { r.unregister(); });
              });
            }
            // Clear caches
            if ('caches' in window) {
              caches.keys().then(function(names) {
                names.forEach(function(n) { caches.delete(n); });
              });
            }
            // Clear storage
            try { localStorage.clear(); } catch(e) {}
            try { sessionStorage.clear(); } catch(e) {}
            // Hard reload
            setTimeout(function() { location.reload(true); }, 300);
          }
        });
      })();
    </script>
    
    <!-- Mercado Pago Security Script - only load on payment pages via dynamic import -->
  </body>
</html>
