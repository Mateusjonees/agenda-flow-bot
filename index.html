<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
    <title>Foguete Gestão Empresarial | Sistema Completo de Gestão</title>
    <meta name="description" content="Sistema completo de gestão empresarial com automação inteligente via WhatsApp">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#E31837" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Foguete" />
    <meta name="mobile-web-app-capable" content="yes" />
    
    <!-- Preconnect to critical domains only -->
    <link rel="preconnect" href="https://pnwelorcrncqltqiyxwx.supabase.co" crossorigin />
    
    <!-- DNS Prefetch for secondary resources (lower priority) -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
    <link rel="dns-prefetch" href="https://img.youtube.com" />
    
    <!-- Preload critical assets with high priority -->
    <link rel="preload" href="/foguetinho.png" as="image" type="image/png" fetchpriority="high" />
    
    <!-- Icons and manifest -->
    <link rel="icon" type="image/png" href="/foguetinho.png">
    <link rel="apple-touch-icon" href="/icon-192.png" />
    <link rel="manifest" href="/manifest.json">
    
    <!-- iOS Splash Screens -->
    <link rel="apple-touch-startup-image" href="/foguetinho.png" />
    
    <!-- Open Graph / Social -->
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://storage.googleapis.com/gpt-engineer-file-uploads/3WF77CQiGnfJw3tdycD5KYgot9b2/social-images/social-1762508861184-logo_foguete_transparente-removebg-preview.png">
    <meta property="og:title" content="Foguete Gestão Empresarial | Sistema Completo de Gestão">
    <meta property="og:description" content="Sistema completo de gestão empresarial com automação inteligente via WhatsApp">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="https://storage.googleapis.com/gpt-engineer-file-uploads/3WF77CQiGnfJw3tdycD5KYgot9b2/social-images/social-1762508861184-logo_foguete_transparente-removebg-preview.png">
    <meta name="twitter:title" content="Foguete Gestão Empresarial | Sistema Completo de Gestão">
    <meta name="twitter:description" content="Sistema completo de gestão empresarial com automação inteligente via WhatsApp">
    
    <!-- Inline critical CSS for faster first paint -->
    <style>
      :root { --bg: #0A0A0A; --primary: #E31837; }
      * { margin: 0; padding: 0; box-sizing: border-box; }
      html { background: var(--bg); }
      body { background: var(--bg); color: #fafafa; font-family: system-ui, -apple-system, sans-serif; -webkit-font-smoothing: antialiased; }
      #root { min-height: 100vh; background: var(--bg); }
      .initial-loader { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; background: var(--bg); }
      .initial-loader svg { animation: spin 1s linear infinite; color: var(--primary); width: 32px; height: 32px; }
      @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      .recovery-msg { display: none; flex-direction: column; align-items: center; margin-top: 24px; color: #a0a0a0; text-align: center; }
      .recovery-msg.visible { display: flex; }
      .recovery-btn { margin-top: 12px; padding: 10px 20px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; }
      .recovery-btn:hover { background: #c41430; }
      .hero-title { font-size: clamp(2rem, 5vw, 4rem); font-weight: 800; line-height: 1.1; }
      .text-gradient-primary { background: linear-gradient(135deg, #E31837 0%, #FF6B35 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
      .btn-primary { background: var(--primary); color: white; padding: 0.875rem 2rem; border-radius: 0.5rem; font-weight: 500; display: inline-flex; align-items: center; gap: 0.5rem; border: none; cursor: pointer; font-size: 1rem; }
      .btn-outline { background: transparent; border: 1px solid #333; color: #fff; padding: 0.875rem 2rem; border-radius: 0.5rem; font-weight: 500; display: inline-flex; align-items: center; gap: 0.5rem; cursor: pointer; font-size: 1rem; }
      .navbar-critical { position: fixed; top: 0; left: 0; right: 0; height: 64px; background: var(--bg); border-bottom: 1px solid #1a1a1a; z-index: 50; }
    </style>
  </head>

  <body>
    <div id="root">
      <!-- Initial loader shown before JS loads -->
      <div class="initial-loader" id="initial-loader">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
        </svg>
        <div class="recovery-msg" id="recovery-msg">
          <p>O site está demorando para carregar.</p>
          <button class="recovery-btn" id="recovery-btn">Limpar cache e recarregar</button>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Fallback recovery script for stuck loaders (cache/SW issues) -->
    <script>
      (function() {
        var TIMEOUT_MS = 8000;
        var timer = setTimeout(function() {
          var msg = document.getElementById('recovery-msg');
          if (msg) msg.classList.add('visible');
        }, TIMEOUT_MS);
        
        // If React mounts, loader is replaced, so we can clear the timer
        var observer = new MutationObserver(function(mutations) {
          var loader = document.getElementById('initial-loader');
          if (!loader || !document.body.contains(loader)) {
            clearTimeout(timer);
            observer.disconnect();
          }
        });
        observer.observe(document.getElementById('root'), { childList: true, subtree: true });
        
        // Recovery button handler
        document.addEventListener('click', function(e) {
          if (e.target && e.target.id === 'recovery-btn') {
            // Unregister service workers
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker.getRegistrations().then(function(regs) {
                regs.forEach(function(r) { r.unregister(); });
              });
            }
            // Clear caches
            if ('caches' in window) {
              caches.keys().then(function(names) {
                names.forEach(function(n) { caches.delete(n); });
              });
            }
            // Clear storage
            try { localStorage.clear(); } catch(e) {}
            try { sessionStorage.clear(); } catch(e) {}
            // Hard reload
            setTimeout(function() { location.reload(true); }, 300);
          }
        });
      })();
    </script>
    
    <!-- Mercado Pago Security Script - only load on payment pages via dynamic import -->
  </body>
</html>
